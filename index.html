<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Org Chart</title>
  </head>
  <body>
    <script src="https://cdn.balkan.app/orgchart.js"></script>
    <div id="tree"></div>
    <script>
      let nodes = [
        {
          id: "1",
          Name: "Shirin Jamalli",
          Position: "Chairman of the Board",
          email: "",
          img: "./blank-profile-picture-973460_1280.webp",
        },
        {
          id: "2",
          pid: "1",
          Name: "Elvin Jamalli",
          Position: "Deputy Chairman Commerce Europe",
          email: "",
          img: "./blank-profile-picture-973460_1280.webp",
        },
        {
          id: "3",
          pid: "2",
          Name: "Michael Gilhooley",
          Position: "Commercial Manager",
          email: "",
          img: "./blank-profile-picture-973460_1280.webp",
        },
        {
          id: "5",
          pid: "3",
          Name: "Michael Richards",
          Position: "Senior Sales Specialist",
          email: "",
          img: "./blank-profile-picture-973460_1280.webp",
        },
        {
          id: "6",
          pid: "3",
          Name: "Nick Williamson",
          Position: "Senior Sales Specialist",
          email: "",
          img: "./blank-profile-picture-973460_1280.webp",
        },
        {
          id: "7",
          pid: "3",
          Name: "Andrew Roberts",
          Position: "Senior Sales Specialist",
          email: "",
          img: "./blank-profile-picture-973460_1280.webp",
        },
        {
          id: "8",
          pid: "2",
          Name: "Vacant",
          Position: "Operations Manager",
          email: "",
          img: "./blank-profile-picture-973460_1280.webp",
        },
        {
          id: "9",
          pid: "8",
          Name: "Richard Millard",
          Position: "Senior Logistics Specialist",
          email: "",
          img: "./blank-profile-picture-973460_1280.webp",
        },
        {
          id: "10",
          pid: "8",
          Name: "Vacant",
          Position: "Operations Specialist",
          email: "",
          img: "./blank-profile-picture-973460_1280.webp",
        },

        {
          id: "11",
          pid: "2",
          Name: "Vacant",
          Position: "Financial Controller",
          email: "",
          img: "./blank-profile-picture-973460_1280.webp",
        },
        {
          id: "12",
          pid: "11",
          Name: "Joseph Babuji",
          Position: "Chief Accountant",
          email: "",
          img: "./blank-profile-picture-973460_1280.webp",
        },
        {
          id: "4",
          pid: "2",
          Name: "Nitika Nanda",
          Position: "Senior Commercial Specialist",
          email: "",
          img: "./blank-profile-picture-973460_1280.webp",
        },
        {
          id: "13",
          pid: "2",
          Name: "Vacant",
          Position: "ERP Specialist",
          email: "",
          img: "./blank-profile-picture-973460_1280.webp",
        },
      ];

      let options = getOptions();
      let chart = new OrgChart(document.getElementById("tree"), {
        template: "ula",
        mouseScrool: OrgChart.none,
        scaleInitial: OrgChart.match.width,
        scaleInitial: options.scaleInitial,
        enableSearch: true,
        layout: OrgChart.mixed,
        nodeBinding: {
          field_0: "Name",
          field_1: "Position",
          img_0: "img",
        },
      });

      for (let i = 0; i < nodes.length; i++) {
        let node = nodes[i];
        switch (node.Name) {
          case "Vacant":
            node.tags = ["vacant"];
            break;
        }
      }

      chart.load(nodes);

      function getOptions() {
        const searchParams = new URLSearchParams(window.location.search);
        let fit = searchParams.get("fit");
        let enableSearch = true;
        let scaleInitial = 1;
        if (fit == "yes") {
          enableSearch = false;
          scaleInitial = OrgChart.match.boundary;
        }
        return { enableSearch, scaleInitial };
      }
    </script>
  </body>
</html>
